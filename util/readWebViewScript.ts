export const readWebViewScript =
  'var a=()=>{let t=document.getElementById("chapters"),o;if(t){let u=t.getBoundingClientRect(),d=window.scrollY||window.pageYOffset,g=d+u.top,s=u.height;if(s===0)return 0;let l=d-g,c=0;if(l<=0)c=0;else if(l>=s)c=100;else c=l/s*100;o=Math.max(0,Math.min(100,c))}if(o===void 0||Number.isNaN(o))return;let e=Math.floor(o).toString(),n=new URL(window.location.href),i=n.searchParams.get("scroll");if(i!==null&&i===e)return;n.searchParams.set("scroll",e),window.history.replaceState({},"",n.toString())};var p=()=>{let t={type:"workInfo",url:window.location.href,workName:document.querySelector("#workskin h2.title.heading")?.textContent?.trim(),workLastUpdated:(document.querySelector(".work.meta.group .stats dd.status")||document.querySelector(".work.meta.group .stats dd.published"))?.textContent?.trim(),chapterName:document.querySelector("#chapters div.chapter div.chapter.preface.group h3.title")?.textContent?.trim(),chapterNumber:document.querySelector("#chapters div.chapter")?.id,totalChapters:document.querySelector(".work.meta.group .stats dd.chapters")?.textContent?.trim(),authorUrl:document.querySelector("#workskin .byline.heading a")?.getAttribute("href")??void 0};return JSON.stringify(t)};var r=(t)=>{return Array.from(document.querySelectorAll(\\`.work.meta.group dd.${t}.tags a\\`)).map((e)=>({tag:e?.innerText,href:e?.getAttribute("href")}))},m=()=>{let t={type:"workTags",url:window.location.href,workLastUpdated:(document.querySelector(".work.meta.group .stats dd.status")||document.querySelector(".work.meta.group .stats dd.published"))?.textContent?.trim(),rating:r("rating")[0],warnings:[],category:r("category"),fandom:r("fandom"),relationship:r("relationship"),character:r("character"),freeform:r("freeform")};return JSON.stringify(t)};var h=(t)=>{let o=Number.parseInt(t,10),e=document.getElementById("chapters");if(e&&!Number.isNaN(o)){let n=e.getBoundingClientRect().height,i=e.offsetTop+n*o/100;window.scrollTo(0,i)}};var f=new URL(window.location.href),k=f.pathname.split("/").filter(Boolean),w=f.searchParams.get("scrollTo");if(k[0]==="works")window.addEventListener("scroll",a),window.ReactNativeWebView.postMessage(p()),window.ReactNativeWebView.postMessage(m());if(w)h(w);';
